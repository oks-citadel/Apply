apiVersion: v1
kind: ConfigMap
metadata:
  name: applyforus-config
  namespace: applyforus
  labels:
    app: applyforus-platform
data:
  # Application Configuration
  NODE_ENV: "production"
  LOG_LEVEL: "info"

  # Database Configuration
  POSTGRES_HOST: "jobpilot-postgres.postgres.database.azure.com"
  POSTGRES_PORT: "5432"
  POSTGRES_DB: "jobpilot"

  # Redis Configuration
  REDIS_HOST: "jobpilot-redis.redis.cache.windows.net"
  REDIS_PORT: "6380"
  REDIS_TLS: "true"

  # Service URLs (Internal) - ports match K8s deployment containerPorts
  AUTH_SERVICE_URL: "http://auth-service.applyforus.svc.cluster.local:4000"
  USER_SERVICE_URL: "http://user-service.applyforus.svc.cluster.local:4004"
  JOB_SERVICE_URL: "http://job-service.applyforus.svc.cluster.local:4002"
  AI_SERVICE_URL: "http://ai-service.applyforus.svc.cluster.local:5000"
  RESUME_SERVICE_URL: "http://resume-service.applyforus.svc.cluster.local:4001"
  ANALYTICS_SERVICE_URL: "http://analytics-service.applyforus.svc.cluster.local:3007"
  NOTIFICATION_SERVICE_URL: "http://notification-service.applyforus.svc.cluster.local:4005"
  AUTO_APPLY_SERVICE_URL: "http://auto-apply-service.applyforus.svc.cluster.local:4003"

  # Azure Configuration
  AZURE_STORAGE_ACCOUNT_NAME: "jobpilotstorage"
  AZURE_BLOB_CONTAINER_RESUMES: "resumes"
  AZURE_BLOB_CONTAINER_DOCUMENTS: "documents"

  # Azure OpenAI Configuration
  AZURE_OPENAI_ENDPOINT: "https://jobpilot-openai.openai.azure.com/"
  AZURE_OPENAI_DEPLOYMENT_NAME: "gpt-4"
  AZURE_OPENAI_API_VERSION: "2024-02-15-preview"

  # Email Configuration
  SMTP_HOST: "smtp.sendgrid.net"
  SMTP_PORT: "587"
  SMTP_SECURE: "false"
  EMAIL_FROM: "noreply@jobpilot.com"

  # Application Settings
  CORS_ORIGIN: "https://jobpilot.com,https://www.jobpilot.com"
  API_RATE_LIMIT: "100"
  API_RATE_WINDOW: "15"
  SESSION_TIMEOUT: "3600"

  # Feature Flags
  FEATURE_AUTO_APPLY: "true"
  FEATURE_AI_RESUME: "true"
  FEATURE_ANALYTICS: "true"
  FEATURE_NOTIFICATIONS: "true"
