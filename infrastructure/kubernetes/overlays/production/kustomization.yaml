apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: applyforus

bases:
- ../../base
- ../../services

commonLabels:
  environment: production
  app.kubernetes.io/environment: production

commonAnnotations:
  environment: production

# Production uses replicas defined in base manifests
# No replica overrides needed

# Image tag overrides for production
images:
- name: ${ACR_LOGIN_SERVER}/auth-service
  newName: applyforusacr.azurecr.io/auth-service
  newTag: v1.0.0
- name: ${ACR_LOGIN_SERVER}/user-service
  newName: applyforusacr.azurecr.io/user-service
  newTag: v1.0.0
- name: ${ACR_LOGIN_SERVER}/job-service
  newName: applyforusacr.azurecr.io/job-service
  newTag: v1.0.0
- name: ${ACR_LOGIN_SERVER}/ai-service
  newName: applyforusacr.azurecr.io/ai-service
  newTag: v1.0.0
- name: ${ACR_LOGIN_SERVER}/resume-service
  newName: applyforusacr.azurecr.io/resume-service
  newTag: v1.0.0
- name: ${ACR_LOGIN_SERVER}/analytics-service
  newName: applyforusacr.azurecr.io/analytics-service
  newTag: v1.0.0
- name: ${ACR_LOGIN_SERVER}/notification-service
  newName: applyforusacr.azurecr.io/notification-service
  newTag: v1.0.0
- name: ${ACR_LOGIN_SERVER}/auto-apply-service
  newName: applyforusacr.azurecr.io/auto-apply-service
  newTag: v1.0.0
- name: ${ACR_LOGIN_SERVER}/orchestrator-service
  newName: applyforusacr.azurecr.io/orchestrator-service
  newTag: v1.0.0
- name: ${ACR_LOGIN_SERVER}/payment-service
  newName: applyforusacr.azurecr.io/payment-service
  newTag: v1.0.0
- name: ${ACR_LOGIN_SERVER}/web-app
  newName: applyforusacr.azurecr.io/web-app
  newTag: v1.0.0
- name: ${ACR_LOGIN_SERVER}/applyai-admin
  newName: applyforusacr.azurecr.io/applyai-admin
  newTag: latest

# ConfigMap overrides for production environment
configMapGenerator:
- name: applyforus-config
  behavior: merge
  literals:
  - NODE_ENV=production
  - LOG_LEVEL=info
  - CORS_ORIGIN=https://applyforus.com,https://www.applyforus.com
