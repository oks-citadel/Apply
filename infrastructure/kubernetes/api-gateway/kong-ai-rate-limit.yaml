# AI Service Specific Rate Limiting
# This file contains service-specific rate limiting configuration for AI service
# Apply this after the main Kong configuration to override default rate limits

apiVersion: v1
kind: ConfigMap
metadata:
  name: kong-ai-rate-limit
  namespace: kong
  labels:
    app: kong
    component: api-gateway
    service: ai-service
data:
  # Note: In declarative mode, service-specific plugins must be defined
  # in the main kong.yml file. This file serves as documentation for
  # the AI service rate limiting configuration.

  ai-rate-limit.yml: |
    # AI Service Rate Limiting Configuration
    # Applied to ai-service to limit expensive AI operations

    # Recommended configuration:
    # - 50 requests per minute (vs 100 for other services)
    # - 2000 requests per hour (vs 5000 for other services)
    # - Policy: local (in-memory)
    # - Limit by: consumer or IP

    # To apply this, add the following to the ai-service in kong-config.yaml:
    # plugins:
    #   - name: rate-limiting
    #     config:
    #       minute: 50
    #       hour: 2000
    #       policy: local
    #       limit_by: consumer
    #       hide_client_headers: false
