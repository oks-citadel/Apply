# E2E Test Environment Configuration
# Copy this file to .env and update with your test environment values

# =============================================================================
# Database Configuration
# =============================================================================

# Test database URL (PostgreSQL)
# Format: postgresql://username:password@host:port/database
# Use a separate database for testing to avoid affecting development data
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/jobpilot_test

# Skip database cleanup after tests (useful for debugging)
# Set to 'true' to keep test data after tests complete
SKIP_DB_CLEANUP=false

# =============================================================================
# API Configuration
# =============================================================================

# Base URL for API calls (auth service)
# This should point to your running auth service
TEST_API_URL=http://localhost:3001/api/v1

# Base URL for web application
# This is used by Playwright for E2E tests
BASE_URL=http://localhost:3000

# =============================================================================
# Test User Configuration
# =============================================================================

# Test user credentials (created automatically during setup)
TEST_USER_EMAIL=test@example.com
TEST_USER_PASSWORD=TestPassword123!

# Admin user credentials (created automatically during setup)
TEST_ADMIN_EMAIL=admin@example.com
TEST_ADMIN_PASSWORD=AdminPassword123!

# =============================================================================
# Test Execution Configuration
# =============================================================================

# Run tests in headless mode (no browser window)
HEADLESS=true

# Number of parallel workers (default: auto-detect CPU cores)
# Set to 1 for debugging
WORKERS=auto

# Test timeout in milliseconds
TEST_TIMEOUT=60000

# Retry failed tests (number of retries)
RETRIES=1

# =============================================================================
# Service Configuration
# =============================================================================

# Auth Service
AUTH_SERVICE_URL=http://localhost:3001

# Job Service
JOB_SERVICE_URL=http://localhost:3002

# Resume Service
RESUME_SERVICE_URL=http://localhost:3003

# AI Service
AI_SERVICE_URL=http://localhost:3004

# User Service
USER_SERVICE_URL=http://localhost:3005

# Notification Service
NOTIFICATION_SERVICE_URL=http://localhost:3006

# Analytics Service
ANALYTICS_SERVICE_URL=http://localhost:3007

# Auto-Apply Service
AUTO_APPLY_SERVICE_URL=http://localhost:3008

# =============================================================================
# Authentication Configuration
# =============================================================================

# JWT secret for test environment (should match auth service)
TEST_JWT_SECRET=test-jwt-secret-for-e2e-testing

# =============================================================================
# Debugging and Logging
# =============================================================================

# Enable verbose logging
DEBUG=false

# Show browser console logs in test output
SHOW_BROWSER_CONSOLE=false

# Save video recordings of tests
RECORD_VIDEO=on-failure

# Take screenshots on test failure
SCREENSHOT=on-failure

# =============================================================================
# CI/CD Configuration
# =============================================================================

# Set to 'true' when running in CI environment
CI=false

# CI provider (github, gitlab, azure, etc.)
CI_PROVIDER=

# =============================================================================
# External Services (Optional)
# =============================================================================

# Redis connection (if needed for testing)
TEST_REDIS_URL=redis://localhost:6379

# Email service (use test/mock service)
TEST_EMAIL_HOST=smtp.mailtrap.io
TEST_EMAIL_PORT=2525
TEST_EMAIL_USER=
TEST_EMAIL_PASS=

# =============================================================================
# Feature Flags
# =============================================================================

# Enable/disable specific test suites
RUN_AUTH_TESTS=true
RUN_JOB_TESTS=true
RUN_RESUME_TESTS=true
RUN_AI_TESTS=true
RUN_PAYMENT_TESTS=true
RUN_ADMIN_TESTS=true

# =============================================================================
# Performance Testing
# =============================================================================

# Maximum response time for API calls (ms)
MAX_API_RESPONSE_TIME=5000

# Maximum page load time (ms)
MAX_PAGE_LOAD_TIME=10000

# =============================================================================
# Notes
# =============================================================================
# 1. Never commit the actual .env file with real credentials
# 2. Use separate test databases to avoid data conflicts
# 3. Ensure all services are running before executing tests
# 4. Set SKIP_DB_CLEANUP=true when debugging test failures
# 5. Use WORKERS=1 when debugging to run tests sequentially
