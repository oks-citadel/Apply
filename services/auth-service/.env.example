# Application
NODE_ENV=development
PORT=8001
API_PREFIX=api/v1

# Database - PostgreSQL connection
# Production: Azure Database for PostgreSQL
# Local Dev: Use localhost or Docker Compose
# Format: postgresql://username:password@host:port/database?sslmode=require
DATABASE_URL=postgresql://applyforusadmin@applyforus-postgres:${DB_PASSWORD}@applyforus-postgres.postgres.database.azure.com:5432/applyforus?sslmode=require

# Alternative Database Configuration (if not using DATABASE_URL)
DB_HOST=applyforus-postgres.postgres.database.azure.com
DB_PORT=5432
DB_USERNAME=applyforusadmin@applyforus-postgres
DB_PASSWORD=<your-db-password-here>
DB_DATABASE=applyforus
DB_SSL=true

# Local Development (Override in .env.local)
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/auth_service_db
# DB_HOST=localhost
# DB_USERNAME=postgres
# DB_PASSWORD=postgres
# DB_SSL=false

# JWT Configuration
# CRITICAL SECURITY: Change these secrets in production!
# Generate strong secrets with: openssl rand -base64 64
# Secret key for signing JWT tokens - MUST be at least 32 characters
JWT_SECRET=your-super-secret-jwt-key-change-in-production-min-32-chars
# Access token expiration time (e.g., 15m, 1h, 7d)
# RECOMMENDATION: Use short-lived access tokens (15m) for better security
JWT_ACCESS_TOKEN_EXPIRY=15m
# Secret key for refresh tokens - MUST be different from JWT_SECRET
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-in-production-min-32-chars
# Refresh token expiration time
# RECOMMENDATION: 7d for web apps, 30d for mobile apps
JWT_REFRESH_EXPIRES_IN=7d
# JWT Issuer - identifies the principal that issued the token
JWT_ISSUER=applyforus-auth-service
# JWT Audience - identifies the recipients that the JWT is intended for
JWT_AUDIENCE=applyforus-platform

# Google OAuth Configuration
# Get these from: https://console.cloud.google.com/apis/credentials
# Production: Use production callback URLs
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=https://api.applyforus.com/api/v1/auth/google/callback
# Local Dev: http://localhost:8001/api/v1/auth/google/callback

# GitHub OAuth Configuration
# Get these from: https://github.com/settings/developers
# Production: Use production callback URLs
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_CALLBACK_URL=https://api.applyforus.com/api/v1/auth/github/callback
# Local Dev: http://localhost:8001/api/v1/auth/github/callback

# LinkedIn OAuth Configuration
# Get these from: https://www.linkedin.com/developers/apps
# Production: Use production callback URLs
LINKEDIN_CLIENT_ID=your-linkedin-client-id
LINKEDIN_CLIENT_SECRET=your-linkedin-client-secret
LINKEDIN_CALLBACK_URL=https://api.applyforus.com/api/v1/auth/linkedin/callback
# Local Dev: http://localhost:8001/api/v1/auth/linkedin/callback

# Redis Configuration
# Production: Azure Cache for Redis with SSL/TLS
# Local Dev: Use localhost or Docker Compose
# Used for session management, token blacklisting, and rate limiting
REDIS_HOST=applyforus-redis.redis.cache.windows.net
REDIS_PORT=6380
REDIS_PASSWORD=<your-redis-access-key-here>
REDIS_DB=0
REDIS_TLS=true
REDIS_SSL=true
# Redis key TTL in seconds (default: 1 hour)
REDIS_TTL=3600

# Local Development (Override in .env.local)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_TLS=false
# REDIS_SSL=false

# CORS Configuration
# Production: Use production domain names
# Local Dev: Use localhost URLs
# Comma-separated list of allowed origins
CORS_ORIGINS=https://applyforus.com,https://www.applyforus.com,https://api.applyforus.com
CORS_ALLOW_CREDENTIALS=true

# Local Development (Override in .env.local)
# CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# Rate Limiting
# Global rate limit - time window in milliseconds (60000 = 1 minute)
THROTTLE_TTL=60000
# Global rate limit - maximum requests per window
THROTTLE_LIMIT=100
# Login endpoint rate limit (stricter) - already configured in controller decorators
# Registration rate limit - already configured in controller decorators

# Two-Factor Authentication (2FA)
# Application name for 2FA QR codes
TWO_FACTOR_APP_NAME=ApplyForUs

# Email Configuration (for verification and password reset emails)
# SMTP settings - Used by the Email Service
# For Gmail: smtp.gmail.com, port 587, secure=false
# For Outlook: smtp-mail.outlook.com, port 587, secure=false
# For SendGrid: smtp.sendgrid.net, port 587, secure=false
# For Mailgun: smtp.mailgun.org, port 587, secure=false
# Note: For Gmail, you need to use an App Password, not your regular password
# Generate one at: https://myaccount.google.com/apppasswords
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-specific-password
EMAIL_FROM=noreply@applyforus.com

# Email Token Expiration (in seconds)
EMAIL_VERIFICATION_EXPIRY=86400
PASSWORD_RESET_EXPIRY=3600

# Deprecated SMTP variables (for backward compatibility)
# Use EMAIL_* variables above instead
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-specific-password

# Password Policy and Security
# Minimum password length (RECOMMENDATION: 8 minimum, 12+ for better security)
MIN_PASSWORD_LENGTH=8
# Bcrypt salt rounds (RECOMMENDATION: 10-12 for production, higher = more secure but slower)
BCRYPT_ROUNDS=12
# Maximum login attempts before account lockout
MAX_LOGIN_ATTEMPTS=5
# Account lockout duration in seconds (900 = 15 minutes)
LOCKOUT_DURATION=900
# Password requirements (set to false to disable)
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true

# External Services
# Production: Use Kubernetes internal DNS or Azure endpoints
# Local Dev: Use localhost URLs
USER_SERVICE_URL=http://user-service.applyforus.svc.cluster.local:8002
JOB_SERVICE_URL=http://job-service.applyforus.svc.cluster.local:8004

# Local Development (Override in .env.local)
# USER_SERVICE_URL=http://localhost:8002/api/v1
# JOB_SERVICE_URL=http://localhost:8004/api/v1

# Logging
LOG_LEVEL=debug

# Session Configuration
# Session secret for cookies (CHANGE IN PRODUCTION!)
# Generate with: openssl rand -base64 64
SESSION_SECRET=your-session-secret-change-in-production-min-32-chars
# Session max age in milliseconds (default: 24 hours)
SESSION_MAX_AGE=86400000

# CSRF Protection
# Enable CSRF protection for state-changing operations
CSRF_ENABLED=true
# CSRF token secret (CHANGE IN PRODUCTION!)
CSRF_SECRET=your-csrf-secret-change-in-production-min-32-chars

# Security Headers
# Enable Helmet security headers middleware
HELMET_ENABLED=true
# Enable HSTS (HTTP Strict Transport Security)
HSTS_ENABLED=true
# HSTS max age in seconds (31536000 = 1 year)
HSTS_MAX_AGE=31536000

# Token Storage Recommendations (Documentation)
# IMPORTANT: Never store JWT access tokens in localStorage (vulnerable to XSS)
# RECOMMENDED:
#   - Store access tokens in memory (React state, Vuex, etc.)
#   - Store refresh tokens in httpOnly, secure, sameSite cookies
#   - Use HTTPS in production
#   - Implement token rotation for refresh tokens
