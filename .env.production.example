# ============================================================================
# ApplyForUs AI Platform - PRODUCTION Environment Variables
# ============================================================================
# This file contains production-ready environment variables for Azure deployment
# Copy this file to .env.production and update with your actual Azure values
# ============================================================================

# ============================================================================
# ENVIRONMENT
# ============================================================================
NODE_ENV=production

# ============================================================================
# FRONTEND URLS (PRODUCTION)
# ============================================================================
FRONTEND_URL=https://applyforus.com
APP_URL=https://applyforus.com
API_URL=https://api.applyforus.com
NEXT_PUBLIC_API_URL=https://api.applyforus.com

# ============================================================================
# AZURE DATABASE FOR POSTGRESQL
# ============================================================================
# Azure PostgreSQL with SSL/TLS required
DATABASE_URL=postgresql://applyforusadmin@applyforus-postgres:${POSTGRES_PASSWORD}@applyforus-postgres.postgres.database.azure.com:5432/applyforus?sslmode=require
POSTGRES_USER=applyforusadmin@applyforus-postgres
POSTGRES_PASSWORD=<stored-in-k8s-secret>
POSTGRES_DB=applyforus
POSTGRES_HOST=applyforus-postgres.postgres.database.azure.com
POSTGRES_PORT=5432
POSTGRES_SSL=true

DB_HOST=applyforus-postgres.postgres.database.azure.com
DB_PORT=5432
DB_USERNAME=applyforusadmin@applyforus-postgres
DB_PASSWORD=<stored-in-k8s-secret>
DB_DATABASE=applyforus
DB_NAME=applyforus
DB_SSL=true

# ============================================================================
# AZURE CACHE FOR REDIS
# ============================================================================
# Azure Redis with SSL/TLS on port 6380
REDIS_URL=rediss://:${REDIS_PASSWORD}@applyforus-redis.redis.cache.windows.net:6380/0
REDIS_HOST=applyforus-redis.redis.cache.windows.net
REDIS_PORT=6380
REDIS_PASSWORD=<stored-in-k8s-secret>
REDIS_DB=0
REDIS_TLS=true
REDIS_SSL=true

# ============================================================================
# AZURE SERVICE BUS (Replaces RabbitMQ for production)
# ============================================================================
AZURE_SERVICE_BUS_CONNECTION_STRING=<stored-in-k8s-secret>
AZURE_SERVICE_BUS_QUEUE_NAME=applyforus-queue

# ============================================================================
# ELASTICSEARCH (AZURE HOSTED)
# ============================================================================
ELASTICSEARCH_URL=https://applyforus-elasticsearch.azurewebsites.net:9200
ELASTICSEARCH_NODE=https://applyforus-elasticsearch.azurewebsites.net:9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=<stored-in-k8s-secret>
ELASTICSEARCH_SSL=true

# ============================================================================
# SERVICE URLS (KUBERNETES INTERNAL DNS)
# ============================================================================
# These are internal Kubernetes service URLs
AI_SERVICE_URL=http://ai-service.applyforus.svc.cluster.local:8000
AUTH_SERVICE_URL=http://auth-service.applyforus.svc.cluster.local:8001
USER_SERVICE_URL=http://user-service.applyforus.svc.cluster.local:8002
RESUME_SERVICE_URL=http://resume-service.applyforus.svc.cluster.local:8003
JOB_SERVICE_URL=http://job-service.applyforus.svc.cluster.local:8004
AUTO_APPLY_SERVICE_URL=http://auto-apply-service.applyforus.svc.cluster.local:8005
ANALYTICS_SERVICE_URL=http://analytics-service.applyforus.svc.cluster.local:8006
NOTIFICATION_SERVICE_URL=http://notification-service.applyforus.svc.cluster.local:8007
ORCHESTRATOR_SERVICE_URL=http://orchestrator-service.applyforus.svc.cluster.local:8008
APPLICATION_SERVICE_URL=http://auto-apply-service.applyforus.svc.cluster.local:8005

# ============================================================================
# AZURE BLOB STORAGE
# ============================================================================
AZURE_STORAGE_ACCOUNT_NAME=applyforusstorage
AZURE_STORAGE_ACCOUNT_KEY=<stored-in-k8s-secret>
AZURE_STORAGE_CONNECTION_STRING=<stored-in-k8s-secret>

# Blob Containers
AZURE_BLOB_CONTAINER_RESUMES=resumes
AZURE_BLOB_CONTAINER_PARSED=parsed-resumes
AZURE_BLOB_CONTAINER_GENERATED=generated-resumes
AZURE_BLOB_CONTAINER_UPLOADS=user-uploads
AZURE_BLOB_CONTAINER_PROFILE_PHOTOS=profile-photos
AZURE_BLOB_CONTAINER_DOCUMENTS=documents

# ============================================================================
# CORS & SECURITY
# ============================================================================
CORS_ORIGINS=https://applyforus.com,https://www.applyforus.com,https://api.applyforus.com
CORS_ORIGIN=https://applyforus.com,https://www.applyforus.com,https://api.applyforus.com
CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# JWT SECRETS
# ============================================================================
JWT_SECRET=<stored-in-k8s-secret>
JWT_REFRESH_SECRET=<stored-in-k8s-secret>
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=applyforus-auth-service
JWT_AUDIENCE=applyforus-platform

# ============================================================================
# SESSION
# ============================================================================
SESSION_SECRET=<stored-in-k8s-secret>
SESSION_MAX_AGE=86400000
SESSION_TIMEOUT=3600

# ============================================================================
# EMAIL (SendGrid)
# ============================================================================
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=apikey
SMTP_PASSWORD=<stored-in-k8s-secret>
EMAIL_FROM=noreply@applyforus.com
EMAIL_FROM_NAME=ApplyForUs AI Platform
SENDGRID_API_KEY=<stored-in-k8s-secret>

# ============================================================================
# AI SERVICES
# ============================================================================
OPENAI_API_KEY=<stored-in-k8s-secret>
ANTHROPIC_API_KEY=<stored-in-k8s-secret>
AZURE_OPENAI_ENDPOINT=https://applyforus-openai.openai.azure.com/
AZURE_OPENAI_API_KEY=<stored-in-k8s-secret>
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4
AZURE_OPENAI_API_VERSION=2024-02-15-preview

DEFAULT_LLM_PROVIDER=openai
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2000

# Vector Database (Pinecone)
PINECONE_API_KEY=<stored-in-k8s-secret>
PINECONE_ENVIRONMENT=us-west1-gcp
PINECONE_INDEX_NAME=applyforus-vectors

# ============================================================================
# OAUTH PROVIDERS
# ============================================================================
GOOGLE_CLIENT_ID=<your-google-client-id>.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=<stored-in-k8s-secret>
GOOGLE_CALLBACK_URL=https://api.applyforus.com/api/v1/auth/google/callback

LINKEDIN_CLIENT_ID=<your-linkedin-client-id>
LINKEDIN_CLIENT_SECRET=<stored-in-k8s-secret>
LINKEDIN_CALLBACK_URL=https://api.applyforus.com/api/v1/auth/linkedin/callback

GITHUB_CLIENT_ID=<your-github-client-id>
GITHUB_CLIENT_SECRET=<stored-in-k8s-secret>
GITHUB_CALLBACK_URL=https://api.applyforus.com/api/v1/auth/github/callback

# ============================================================================
# PAYMENT (Stripe)
# ============================================================================
STRIPE_PUBLIC_KEY=pk_live_<your-stripe-public-key>
STRIPE_SECRET_KEY=<stored-in-k8s-secret>
STRIPE_WEBHOOK_SECRET=<stored-in-k8s-secret>

# ============================================================================
# FIREBASE (Push Notifications)
# ============================================================================
FIREBASE_PROJECT_ID=<your-firebase-project-id>
FIREBASE_PRIVATE_KEY=<stored-in-k8s-secret>
FIREBASE_CLIENT_EMAIL=<your-firebase-client-email>
FCM_SERVICE_ACCOUNT=<stored-in-k8s-secret>

# ============================================================================
# MONITORING & LOGGING
# ============================================================================
LOG_LEVEL=info

# Azure Application Insights
APPLICATIONINSIGHTS_CONNECTION_STRING=<your-app-insights-connection-string>
APPLICATIONINSIGHTS_INSTRUMENTATION_KEY=<your-app-insights-key>

# Sentry
SENTRY_DSN=<your-sentry-dsn>

ENABLE_METRICS=true
METRICS_PORT=9090

# ============================================================================
# FEATURE FLAGS
# ============================================================================
FEATURE_AUTO_APPLY=true
FEATURE_AI_RESUME_BUILDER=true
FEATURE_ANALYTICS_DASHBOARD=true
FEATURE_CHROME_EXTENSION=true
AI_SUGGESTIONS_ENABLED=true
RESUME_OPTIMIZATION_ENABLED=true
NOTIFICATIONS_ENABLED=true
ENABLE_ANALYTICS=true
ENABLE_VERSION_CONTROL=true

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_WINDOW=60
RATE_LIMIT_MAX=100
THROTTLE_TTL=60000
THROTTLE_LIMIT=100
API_RATE_LIMIT=100
API_RATE_WINDOW=15

# ============================================================================
# CACHE CONFIGURATION
# ============================================================================
CACHE_TTL=300
CACHE_MAX_ITEMS=1000
REDIS_TTL=3600

# ============================================================================
# FILE UPLOAD CONFIGURATION
# ============================================================================
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain
ALLOWED_FILE_EXTENSIONS=.pdf,.doc,.docx,.txt
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp

# ============================================================================
# BROWSER AUTOMATION
# ============================================================================
BROWSER_HEADLESS=true
HEADLESS_BROWSER=true
BROWSER_TIMEOUT=30000
ACTION_DELAY=1000

# ============================================================================
# JOB PROCESSING
# ============================================================================
MAX_CONCURRENT_JOBS=3
MAX_APPLICATIONS_PER_DAY=50
JOB_PROCESSING_TIMEOUT=300000
MAX_RETRY_ATTEMPTS=3
JOB_AGGREGATION_CRON=0 */6 * * *
JOB_RETENTION_DAYS=90

# ============================================================================
# ANALYTICS
# ============================================================================
ANALYTICS_RETENTION_DAYS=90
ANALYTICS_AGGREGATION_INTERVAL=3600000

# ============================================================================
# VERSION CONTROL
# ============================================================================
MAX_VERSIONS_PER_RESUME=10

# ============================================================================
# SECURITY
# ============================================================================
BCRYPT_ROUNDS=12
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=900
MIN_PASSWORD_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true

CSRF_ENABLED=true
CSRF_SECRET=<stored-in-k8s-secret>
HELMET_ENABLED=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000

# ============================================================================
# NOTES FOR PRODUCTION DEPLOYMENT
# ============================================================================
# 1. All <stored-in-k8s-secret> values should be created as Kubernetes secrets
# 2. Never commit actual secret values to version control
# 3. Use Azure Key Vault integration for secret management
# 4. Rotate secrets regularly
# 5. Use managed identities where possible
# 6. Enable SSL/TLS for all connections
# 7. All service-to-service communication uses Kubernetes DNS
# 8. NO localhost or 127.0.0.1 references in production
# 9. NO Docker Desktop required - everything runs in AKS
# 10. Docker Compose is only for local development
# ============================================================================
